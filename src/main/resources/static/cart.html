<!DOCTYPE html>
<html ng-app="app">

<head>
  <meta charset="UTF-8">
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.11/ngStorage.min.js"></script>
  <script src="cart.js"></script>


  <title>Shopping Cart</title>
</head>

<body ng-controller="cartController">
<nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid fs-5">
    <a class="navbar-brand" href="#">
      <img src="images/menu_logo.png" alt="logo">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="index.html" target="_blank">Главная</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Store</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Contact</a>
        </li>
      </ul>
    </div>
    <div class="collapse navbar-collapse position-relative">
      <a  href="#">
        <img src="images/basket.svg" alt="basket" class="position-absolute top-50 start-50 translate-middle">
        <span class="position-absolute bottom-50 end-50 translate-middle badge rounded-pill bg-secondary">{{cart.totalPrice}}</span>
      </a>
    </div>
  </div>
</nav>
<div class="container">
   <h3>Shopping cart</h3>
  <table class="table table-hover">
    <tr class="table-light">
      <td>Tittle</td>
      <td>Quantity</td>
      <td>Price</td>
      <td>Delete</td>
    </tr>
    <tbody>
    <tr ng-repeat="item in cart.items">
      <td>{{item.productTitle}}</td>
      <td>
        <button type="button" class="btn btn-light" ng-click="deleteProductFromCart(item.productId)">-</button>
        {{item.quantity}}
        <button type="button" class="btn btn-light" ng-click="addToCart(item.productId)">+</button>
      </td>
      <td>{{item.price}}</td>
      <td>
        <button type="button" class="btn btn-danger" data-bs-toggle="tooltip" data-bs-placement="right" title="Clear the shopping cart position"ng-click="deleteAllQuantityFromCart(item.productId)">X</button>
      </td>
    </tr>
    </tbody>
    <tbody>
    <tr class="fw-semibold table-light">
      <td>Total</td>
      <td></td>
      <td>{{cart.totalPrice}}</td>
      <td>
        <button type="button" class="btn btn-danger" data-bs-toggle="tooltip" data-bs-placement="right" title="Clear the entire shopping cart" ng-click="deleteAllFromCart()">Clear</button>
      </td>
    </tr>
    </tbody>
  </table>
  <div>
    <button type="button" class="btn btn-success" data-bs-toggle="tooltip" data-bs-placement="right" title="create order" ng-click="createOrder()">Create Order</button>
  </div>
  <h3>My orders</h3>
  <table class="table table-hover">
    <tr class="table-light">
      <td>№</td>
      <td>Quantity</td>
      <td>Price</td>
    </tr>
    <tbody>
    <tr ng-repeat="o in orders">
      <td>{{o.id}}</td>
      <td></td>
      <td>{{o.totalPrice}}</td>
     </tr>
    </tbody>
  </table>
</div>
</body>
</html>